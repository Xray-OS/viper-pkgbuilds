# Maintainer Angel Gustavo Contreras Lopez | xray_os@proton.me
pkgname=arch7z-tolitica
_pkgname=arch7z-tolitica
pkgver=2
pkgrel=2
pkgdesc="Tolitica Xray_OS Assistant Arch7z Development Version"
arch=('x86_64')
url="https://gitlab.com/arch7z/$_pkgname"
license=('Xray_OS EULA')
makedepends=('git')
depends=()
provides=("${pkgname}")
options=(!strip !emptydirs)
source=("${pkgname}::git+https://gitlab.com/arch7z/${_pkgname}#branch=tolitica-arch7z-dev")
sha256sums=('SKIP')
install=tolitica.install
backup=('etc/xray/tolitica/automount/manually_enabled.conf')

package() {
  _destname1="$pkgdir/etc"
  _destname2="$pkgdir/opt"
  _destname3="$pkgdir/usr"

  install -dm755 "$_destname1/skel/.config/autostart"
  install -dm755 "$_destname2"
  install -dm755 "$_destname3"

  cp -r "$srcdir/$pkgname/etc/"* "$_destname1"
  cp -r "$srcdir/$pkgname/opt/"* "$_destname2"
  cp -r "$srcdir/$pkgname/usr/"* "$_destname3"

  install -Dm644 "$srcdir/$pkgname/etc/skel/.config/autostart/tolitica.desktop" \
        "$pkgdir/etc/skel/.config/autostart/tolitica.desktop"
}
